# Check if member of the army
# This trigger excludes rulers (including them in it revealed to be more of a pain than a convenience)
WCR_army_clothes_trigger = {
    OR = {
        scope:pop ?= {
            OR = {
                # Pop works in army building
                workplace ?= {
                    OR = {
                        is_building_type = building_barracks
                        is_building_type = building_conscription_center
                    }
                }
                
                # Military pop that got fired (fallback)
                AND = {
                    NOT = {
                        exists = workplace
                    }
                    OR = {
                        is_pop_type = soldiers
                        is_pop_type = officers
                    }
                }
            }
        }
        AND = {
            OR = {
                # Armed Forces IG leader who isn't a general or admiral
                AND = {
                    armed_forces_clothes_trigger = yes
                    politician_clothes_trigger = yes
                    scope:character ?= {
                        NOT = {
                            has_role = admiral
                        }
                    }
                }
                
                # Generals
                scope:character ?= {
                    has_role = general
                }
            }
            
            # Exclude rulers
            scope:character ?= {
                is_ruler = no
            }
        }
    }
}

# Check if member of the navy
WCR_navy_clothes_trigger = {
    OR = {
        scope:pop ?= {
            always = yes
            workplace ?= {
                is_building_type = building_naval_base
            }
        }
        scope:character ?= {
            has_role = admiral
        }
    }
}

# Check if country, character, or pop is considered westernized
WCR_is_westernized_trigger = {
    OR = {
        scope:pop ?= {
            OR = {
                WCR_st_is_part_west_pop_westernized_trigger = yes
                owner ?= {
                    WCR_st_is_country_westernized = yes
                }
                home_country ?= {
                    WCR_st_is_country_westernized = yes
                }
                
            }
        }
        scope:character ?= {
            OR = {
                WCR_st_is_part_west_character_westernized_trigger = yes
                owner ?= {
                    WCR_st_is_country_westernized = yes
                }
                home_country ?= {
                    WCR_st_is_country_westernized = yes
                }
            }
        }
        scope:country ?= {
            WCR_st_is_country_westernized = yes
        }
    }
}

# Check if country, character, or pop is considered westernized, but EXCLUDING those that begin westernized at game start
WCR_has_completed_westernization_trigger = {
    OR = {
        scope:pop ?= {
            OR = {
                WCR_st_is_part_west_pop_westernized_trigger = yes
                owner ?= {
                    has_variable = WCR_westernized_nation
                    THIS.var:WCR_westernized_nation = yes
                }
                home_country ?= {
                    has_variable = WCR_westernized_nation
                    THIS.var:WCR_westernized_nation = yes
                }
                
            }
        }
        scope:character ?= {
            OR = {
                WCR_st_is_part_west_character_westernized_trigger = yes
                owner ?= {
                    has_variable = WCR_westernized_nation
                    THIS.var:WCR_westernized_nation = yes
                }
                home_country ?= {
                    has_variable = WCR_westernized_nation
                    THIS.var:WCR_westernized_nation = yes
                }
            }
        }
        scope:country ?= {
            has_variable = WCR_westernized_nation
            THIS.var:WCR_westernized_nation = yes
        }
    }
}
