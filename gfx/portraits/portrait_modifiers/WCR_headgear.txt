WCR_headgear = {
    usage = game
    selection_behavior = weighted_random

    ## WCR - Fixes ##
    
    WCR_academic_clothes = { # this was such a simple fix; idk why they didnt just do it
        dna_modifiers = {    # better open a half-point story up on the agile board :kekw:
            accessory = {
                mode = add
                gene = headgear         # according to the PE, it's in headgear, not in props
                template = academic_cap # and it's called academic_cap, not academic_cap_01
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                academics_clothes_pop_trigger = yes
                WCR_is_westernized_trigger    = yes # want to include Europe & co. too in this case
            }
            modifier = {   # Nondisruptive (for Europeans) way to apply it to nations that finished westernization
                add = 1900 # (i.e. Europe gets the normal weight & Asia, etc. get 2100 to match other WCR definitions
                academics_clothes_pop_trigger = yes
                WCR_has_completed_westernization_trigger = yes
            }
        }
    }
    
    ## WCR - Additions ##
    
    WCR_european_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                agitator_character_trigger = yes
            }
        }
    }
    
    WCR_european_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                monarchy_clothes_trigger = yes
            }
            modifier = { # Try to guarantee queen's crown
                add = 100
                WCR_has_completed_westernization_trigger = yes
                monarchy_clothes_trigger = yes
                scope:character ?= {
                    is_female = yes
                }
            }
        }
    }
    
    WCR_european_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                politician_clothes_trigger = yes
                armed_forces_clothes_trigger = no
                monarchy_clothes_trigger = no
                scope:character ?= {
                    age > 12
                }
            }
        }
    }
    
    WCR_european_capitalist_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_tophat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                upper_clothes_pop_trigger = yes
            }
        }
    }
    
    WCR_european_bowler_hat = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_bowlerhat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                middle_clothes_pop_trigger = yes
           }
        }
    }
    
    WCR_european_flat_cap = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_flatcap
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100 # 2000 # Leave at 100 so laborers have flatcaps or their culturally-relevant hats
                WCR_has_completed_westernization_trigger = yes
                poor_clothes_pop_trigger = yes
                peasants_clothes_pop_trigger = no
            }
            modifier = {
                add = 1900
                WCR_has_completed_westernization_trigger = yes
                OR = { # But always give westernized machinists the flat cap
                    machinists_clothes_pop_trigger = yes
                    AND = { # and guarantee flat cap if fully westernize poor pops game rule is set
                        poor_clothes_pop_trigger = yes
                        peasants_clothes_pop_trigger = no
                        has_game_rule = WCR_westernize_poor_pop_clothing_yes
                    }
                }
            }
        }
    }
    
    WCR_european_peasants_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_strawhat
                range = { 0 1 } # For the randomness to work correctly
           
            } 
        }
        weight = {
            base = 0
            modifier = {
                add = 100 # 2000 # Leave at 100 for same reason as flat cap
                WCR_has_completed_westernization_trigger = yes
                peasants_clothes_pop_trigger = yes
            }
            modifier = {
                add = 1900 # Guarantee straw hat if fully westernize poor pops game rule is set
                WCR_has_completed_westernization_trigger = yes
                peasants_clothes_pop_trigger = yes
                has_game_rule = WCR_westernize_poor_pop_clothing_yes
            }
        }
    }
    
    WCR_european_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear # peaked caps only # european_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_no_influence_trigger = yes
            }
            modifier = { # Monarchy commanders in chief
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_has_completed_westernization_trigger = yes
                WCR_ruler_has_no_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_european_admiral_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_admiral_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_navy_clothes_trigger = yes
                # WCR_navy_has_no_influence_trigger = yes # Hat is same for all flavors
            }
            modifier = { # Republic commanders in chief
                add = 2100
                republic_clothes_trigger = yes
                WCR_has_completed_westernization_trigger = yes
                # WCR_ruler_has_no_influence_trigger = yes # Hat is same for all flavors
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_american_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0 0.6 } # 0.6 is upper limit for not having cowboy hats
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_american_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_has_completed_westernization_trigger = yes
                WCR_ruler_has_american_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_british_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = british_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_british_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_has_completed_westernization_trigger = yes
                WCR_ruler_has_british_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_french_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = french_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_french_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_has_completed_westernization_trigger = yes
                WCR_ruler_has_french_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_german_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_german_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_has_completed_westernization_trigger = yes
                WCR_ruler_has_german_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
}
