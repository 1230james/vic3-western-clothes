# Epaulettes, and aiguillettes are handled in the clothes/outfits instead of here

WCR_accessories = {
    usage = game
    selection_behavior = weighted_random
    
    WCR_european_shopkeeper_clothes = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = misc
                template = all_misc
                range = { 0 1 } # For the randomness to work correctly
            }
        } 
        weight = {
            base = 0
            modifier = {
                add = 10000
                shopkeepers_clothes_pop_trigger = yes
                WCR_has_completed_westernization_trigger = yes
            }
        }
    }
}

WCR_sash_accessories = {
    usage = game
    selection_behavior = weighted_random
    
    WCR_generic_sashes = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = sashes
                template = all_sashes
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                agitator_character_trigger = no
                WCR_has_completed_westernization_trigger = yes
                scope:character ?= {
                    age > 12
                    owner ?= {
                        WCR_is_using_vanilla_rules = no
                    }
                }
                OR = {
                    AND = { # Generals
                        WCR_army_clothes_trigger = yes
                        OR = {
                            WCR_army_has_domestic_influence_trigger = yes
                            WCR_army_has_russian_influence_trigger  = yes
                            WCR_army_has_no_influence_trigger       = yes
                        }
                    }
                    AND = { # Admirals
                        WCR_navy_clothes_trigger = yes
                        OR = {
                            WCR_navy_has_domestic_influence_trigger = yes
                            WCR_navy_has_russian_influence_trigger  = yes
                            WCR_navy_has_no_influence_trigger       = yes
                        }
                    }
                    AND = { # Rulers
                        ruler_clothes_trigger = yes
                        OR = {
                            military_clothes_trigger = yes
                            monarchy_clothes_trigger = yes
                        }
                        OR = {
                            WCR_ruler_has_domestic_influence_trigger = yes
                            WCR_ruler_has_russian_influence_trigger  = yes
                            WCR_ruler_has_no_influence_trigger       = yes
                        }
                    }
                }
            }
            modifier = { # Chinese navy has special logic to account for clipping problems
                add = -2000
                WCR_has_completed_westernization_trigger = yes
                WCR_navy_clothes_trigger = yes
                WCR_navy_has_domestic_influence_trigger = yes
                scope:character ?= {
                    owner ?= {
                        WCR_st_is_country_tag = { TAG = CHI }
                    }
                }
            }
            modifier = { # CUP compatibility/deconflict
                add = -2000
                md_chinese_uniform_pack_active_trigger = yes
                scope:character ?= {
                    owner ?= {
                        WCR_st_is_country_tag = { TAG = CHI }
                    }
                }
            }
        }
    }
}

WCR_medals_accessories = {
    usage = game
    selection_behavior = weighted_random
    
    WCR_generic_medals = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = medals
                template = generic_medals
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                agitator_character_trigger = no
                WCR_has_completed_westernization_trigger = yes
                scope:character ?= {
                    age > 12
                    owner ?= {
                        WCR_is_using_vanilla_rules = no
                    }
                }
                OR = {
                    WCR_army_clothes_trigger = yes
                    WCR_navy_clothes_trigger = yes
                    AND = { # Rulers
                        ruler_clothes_trigger = yes
                        OR = {
                            military_clothes_trigger = yes
                            monarchy_clothes_trigger = yes
                        }
                        WCR_late_army_uniform_trigger = no
                    }
                }
            }
            modifier = { # Exclude China due to clipping problems
                add = -2000
                WCR_has_completed_westernization_trigger = yes
                scope:character ?= {
                    owner ?= {
                        WCR_st_is_country_tag = { TAG = CHI }
                    }
                }
                OR = {
                    AND = { # Generals
                        WCR_army_clothes_trigger = yes
                        WCR_army_has_domestic_influence_trigger = yes
                    }
                    AND = { # Admirals
                        WCR_navy_clothes_trigger = yes
                        WCR_navy_has_domestic_influence_trigger = yes
                    }
                    AND = { # Rulers
                        ruler_clothes_trigger = yes
                        OR = {
                            military_clothes_trigger = yes
                            monarchy_clothes_trigger = yes
                        }
                        WCR_ruler_has_domestic_influence_trigger = yes
                    }
                }
            }
        }
    }
}

WCR_belts_accessories = {
    usage = game
    selection_behavior = weighted_random
    
    # Belts only for characters
    # NOT for use with late era uniforms
    WCR_generic_belts = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = belts
                template = all_belts
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                agitator_character_trigger = no
                WCR_has_completed_westernization_trigger = yes
                scope:character ?= {
                    age > 12
                    owner ?= {
                        WCR_is_using_vanilla_rules = no
                    }
                }
                OR = {
                    WCR_navy_clothes_trigger = yes
                    AND = {
                        WCR_late_army_uniform_trigger = no
                        OR = {
                            WCR_army_clothes_trigger = yes
                            AND = { # Rulers
                                ruler_clothes_trigger = yes
                                OR = {
                                    military_clothes_trigger = yes
                                    monarchy_clothes_trigger = yes
                                }
                            }
                        }
                    }
                }
            }
            modifier = { # Exclude China (they have their own)
                add = -2000
                WCR_has_completed_westernization_trigger = yes
                scope:character ?= {
                    owner ?= {
                        WCR_st_is_country_tag = { TAG = CHI }
                    }
                }
                OR = {
                    AND = { # Generals
                        WCR_army_clothes_trigger = yes
                        WCR_army_has_domestic_influence_trigger = yes
                    }
                    AND = { # Admirals
                        WCR_navy_clothes_trigger = yes
                        WCR_navy_has_domestic_influence_trigger = yes
                    }
                    AND = { # Rulers
                        ruler_clothes_trigger = yes
                        OR = {
                            military_clothes_trigger = yes
                            monarchy_clothes_trigger = yes
                        }
                        WCR_ruler_has_domestic_influence_trigger = yes
                    }
                }
            }
        }
    }
}

WCR_eyewear_accessories = {
    usage = game
    selection_behavior = weighted_random
    
    WCR_european_fancy_eyewear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = props
                template = no_prop
                value = 0
            }
            accessory = {
                mode = add
                gene = WCR_eyewear
                template = fancy_eyewear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                WCR_has_completed_westernization_trigger = yes
                OR = {
                    politician_clothes_trigger = yes
                    executive_clothes_trigger  = yes
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                    is_historical = no # Do not disrupt characters with DNA
                    trigger_if = {
                        limit = {
                            politician_clothes_trigger = yes
                        }
                    }
                    OR = {
                        is_interest_group_type = ig_landowners
                        is_interest_group_type = ig_industrialists
                        is_interest_group_type = ig_petty_bourgeoisie
                    }
                }
            }
        }
    }
    
    WCR_european_common_eyewear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = props
                template = no_prop
                value = 0
            }
            accessory = {
                mode = add
                gene = WCR_eyewear
                template = common_eyewear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                WCR_has_completed_westernization_trigger = yes
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                    is_historical = no # Do not disrupt characters with DNA
                    OR = {
                        politician_clothes_trigger = no
                        NOR = {
                            is_interest_group_type = ig_landowners
                            is_interest_group_type = ig_industrialists
                            is_interest_group_type = ig_petty_bourgeoisie
                        }
                    }
                }
            }
        }
    }
}
