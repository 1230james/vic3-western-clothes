# Isolating into its own file to be extra cautious that referencing undefined identifiers won't cause issues elsewhere

WCR_COM_general_override = {
    usage = game
    selection_behavior = weighted_random
    
    WCR_COM_outfit_reset = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = com_aiguillettes
                template = com_no_aiguillettes
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_belts
                template = com_no_belts
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_civilian_coats
                template = com_no_civilian_coats
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_epaulettes
                template = com_no_epaulettes
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_headgear
                template = com_no_headgear
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_legwear
                template = com_no_legwear
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_military_coats
                template = com_no_military_coats
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_sashes
                template = com_no_sashes
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_top_layer
                template = com_no_top_layer
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = com_waistcoats
                template = com_no_waistcoat
                range = { 0 1 }
            }
        } 

        weight = {
            base = 0
            modifier = { # Korea
                add = 1
                com_is_active = yes
                OR = {
                    AND = {
                        OR = {
                            has_game_rule = WCR_modded_KOR_westernization
                            has_game_rule = WCR_mixed_KOR_westernization
                        }
                        OR = {
                            WCR_has_completed_westernization_trigger = no
                            AND = {
                                WCR_has_completed_westernization_trigger = yes
                                WCR_ruler_has_domestic_influence_trigger = no
                            }
                        }
                        scope:character ?= {
                            exists = owner
                            c:KOR ?= owner
                        }
                        OR = {
                            monarchy_clothes_trigger = yes
                            AND = {
                                ruler_clothes_trigger    = yes
                                military_clothes_trigger = yes
                            }
                        }
                    }
                }
            }
        }
    }
}

WCR_COM_special_overrides = {
    usage = game
    selection_behavior = weighted_random
    
    COM_KOR_reset = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = epaulettes
                template = no_epaulettes
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = aiguillettes
                template = no_aiguillettes
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = medals
                template = no_medals
                range = { 0 1 }
            }
        } 

        weight = {
            base = 0
            modifier = { # Korea
                add = 1
                com_is_active = yes
                OR = {
                    AND = {
                        OR = {
                            has_game_rule = WCR_modded_KOR_westernization
                            has_game_rule = WCR_mixed_KOR_westernization
                        }
                        OR = {
                            WCR_has_completed_westernization_trigger = no
                            AND = {
                                WCR_has_completed_westernization_trigger = yes
                                WCR_ruler_has_domestic_influence_trigger = no
                            }
                        }
                        scope:character ?= {
                            exists = owner
                            c:KOR ?= owner
                        }
                        OR = {
                            monarchy_clothes_trigger = yes
                            AND = {
                                ruler_clothes_trigger    = yes
                                military_clothes_trigger = yes
                            }
                        }
                    }
                }
            }
        }
    }
}
